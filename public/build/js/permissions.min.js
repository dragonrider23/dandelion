"use strict";var permissions={allPermissions:{createlog:!1,editlog:!1,viewlog:!1,addcat:!1,editcat:!1,deletecat:!1,adduser:!1,edituser:!1,deleteuser:!1,addgroup:!1,editgroup:!1,deletegroup:!1,viewcheesto:!1,updatecheesto:!1,admin:!1},currentPermissions:{},getList:function(){$.get("api/i/rights/getlist",{},null,"json").done(function(i){var e=$("<select/>").attr("id","groupList");e.append('<option value="0">Select:</option>');for(var s in i.data)if(i.data.hasOwnProperty(s)){var o=i.data[s];e.append('<option value="'+o.id+'">'+o.role+"</option>")}$("#groups").empty(),$("#groups").append(e)})},getPermissions:function(i){var e="undefined"!=typeof i?i:$("#groupList")[0].value;$.get("api/i/rights/getgroup",{groupid:e},null,"json").done(function(i){permissions.showPermissions(i.data)})},showPermissions:function(i){return this.currentPermissions=i,this.drawGrid(i),$("#permissionsBlock").css("display","block"),!0},savePermissions:function(){var i=this.getGrid(),e=$("#groupList").val();if(0!==e){var s=JSON.stringify(i);$.post("api/i/rights/save",{rights:s,groupid:e},null,"json").done(function(i){alert(i.data),$("#permissionsForm")[0].reset(),$("#permissionsBlock").css("display","none"),$("#groupList").val(0)})}},checkGrid:function(i){var e,s=this.allPermissions,o="#"+i;if("admin"==i)if($(o).is(":checked")){for(var t in s)s.hasOwnProperty(t)&&(s[t]=!0);this.drawGrid(s)}else e=this.currentPermissions,e[i]=!1,this.drawGrid(e);else"createlog"==i||"editlog"==i?$(o).is(":checked")&&(e=this.getGrid(),e.viewlog=!0,e[i]=!0,this.drawGrid(e)):"updatecheesto"==i&&$(o).is(":checked")&&(e=this.getGrid(),e.viewcheesto=!0,e[i]=!0,this.drawGrid(e))},goBack:function(){this.drawGrid(this.currentPermissions)},createNew:function(){$("#add-form").dialog({height:225,width:350,modal:!0,buttons:{"Create Group":function(){permissions.sendNew(),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})},sendNew:function(){$.post("api/i/rights/create",{name:$("#name").val(),rights:JSON.stringify(permissions.allPermissions)},null,"json").done(function(i){$("#dialogBox").html(i.data),$("#dialogBox").dialog({modal:!0,width:400,show:{effect:"fade",duration:500},hide:{effect:"fade",duration:500},buttons:{Ok:function(){$(this).dialog("close")}}}),$("#permissionsForm")[0].reset(),$("#permissionsBlock").css("display","none"),permissions.getList()})},deleteGroup:function(){var i=$("#groupList option:selected").text();$("#dialogBox").html("<p>Do you really want to delete the group '"+i+"'?</p>"),$("#dialogBox").dialog({resizable:!1,modal:!0,buttons:{"Delete Group":function(){$(this).dialog("close");var i=$("#groupList").val();$.post("api/i/rights/delete",{groupid:i},null,"json").done(function(i){$("#dialogBox").html("<p>"+i.data+"</p>"),$("#dialogBox").dialog({modal:!0,width:400,show:{effect:"fade",duration:500},hide:{effect:"fade",duration:500},buttons:{Ok:function(){$(this).dialog("close")}}}),$("#permissionsForm")[0].reset(),$("#permissionsBlock").css("display","none"),permissions.getList()})},Cancel:function(){$(this).dialog("close")}}})},drawGrid:function(i){for(var e in i)if(i.hasOwnProperty(e)){var s="#"+e;$(s).prop("checked",i[e])}return!0},getGrid:function(){var i=JSON.parse(JSON.stringify(this.allPermissions));for(var e in i)if(i.hasOwnProperty(e)){var s="#"+e;i[e]=$(s).prop("checked")}return i},check:function(i){13==i.keyCode&&($("#add-form").dialog("close"),this.sendNew(),i.preventDefault())}};
//# sourceMappingURL=maps/permissions.min.js.map