"use strict";var userManager={rights:{},currentuid:null,init:function(){this.getUsersRights(),this.loadCommandList(),this.loadUserList()},getUsersRights:function(){$.ajax("api/i/rights/getUsersRights",{async:!1,dataType:"json"}).done(function(e){0===e.errorcode?userManager.rights=e.data:alert(e.status)})},loadCommandList:function(){var e=$("<select/>").attr("id","commands");e.append('<option value="">Select Command:</option>'),this.rights.adduser&&e.append('<option value="add">Add User</option>'),this.rights.deleteuser&&e.append('<option value="delete">Delete</option>'),this.rights.edituser&&(e.append('<option value="edit">Edit</option>'),e.append('<option value="reset">Reset Password</option>'),e.append('<option value="cxeesto">Change &#264;eesto</option>'),e.append('<option value="revokeKey">Revoke API Key</option>')),$("#userManageForm").prepend(e)},loadUserList:function(){$.getJSON("api/i/users/getUsersList",function(e){0===e.errorcode?userManager.displayUserList(e.data):$("#userlist").html(e.status)})},displayUserList:function(e){var t=$("<table/>"),a="<tr>		                <th>&nbsp;</th>		                <th>Real Name</th>		                <th>Username</th>		                <th>Role</th>		                <th>Date Created</th>		                <th>Theme</th>		                <th>First Login</th>		            </tr>";t.append(a);for(var s in e)if(e.hasOwnProperty(s)){var r=e[s],n='<tr>	                    	<td><input type="radio" name="uid" value="'+r.userid+'"></td>	                    	<td style="text-align: left;">'+r.realname+"</td>	                    	<td>"+r.username+"</td>	                    	<td>"+r.role+"</td>	                    	<td>"+r.datecreated+"</td>	                    	<td>"+r.theme+"</td>	                    	<td>"+r.firsttime+"</td>                    	</tr>";t.append(n)}$("#userlist").empty(),$("#userlist").append(t)},performAction:function(){var e=$("#commands").val();if($("#commands").prop("selectedIndex",0),""===e)return!1;var t=$("input[name=uid]:checked").val();return"undefined"==typeof t&&"add"!=e?!1:(this.currentuid=t,$("#dialog").empty(),void userManager.uiforms[e]())},add:function(){var e=$("#add_user").val(),t=$("#add_pass").val(),a=$("#add_fullname").val(),s=$("#add_group").val();$.post("api/i/users/create",{username:e,password:t,fullname:a,role:s},null,"json").done(function(e){console.log(e),userManager.loadUserList()})},edit:function(){var e=$("#edit_uid").val(),t=$("#edit_theme").val(),a=$("#edit_fullname").val(),s=$("#edit_group").val(),r=$("#edit_prompt").val();$.post("api/i/users/save",{uid:e,fullname:a,role:s,prompt:r,theme:t},null,"json").done(function(e){console.log(e),userManager.loadUserList()})},"delete":function(){$.post("api/i/users/delete",{uid:userManager.currentuid},null,"json").done(function(e){0===e.errorcode&&e.data===!0&&(console.log("Success"),userManager.loadUserList())})},reset:function(){var e=$("#pass1").val(),t=$("#pass2").val();$("#pass1").val(""),$("#pass2").val(""),e===t&&""!==e?$.post("api/i/users/resetPassword",{pw:e,uid:userManager.currentuid},null,"json").done(function(e){0===e.errorcode&&e.data===!0&&console.log("Success")}):alert("Passwords do not match or are empty")},cxeesto:function(){var e=$("#status_uid").val(),t=$("select#status_text").prop("selectedIndex")-1,a=$("#status_message").val(),s=$("#status_return").val();$.post("api/i/cheesto/update",{uid:e,status:t,returntime:s,message:a},null,"json").done(function(e){console.log(e),userManager.loadUserList()})},revokeKey:function(){$.post("api/i/keymanager/revokekey",{uid:userManager.currentuid},null,"json").done(function(e){0===e.errorcode&&e.data.key===!0&&console.log("Success")})}};
//# sourceMappingURL=maps/userManager.min.js.map