"use strict";var CategoryManage={currentID:-1,currentSelection:[],addLog:!1,grabNextLevel:function(e,t){var n;n=e.value?e.value:e,t=this.addLog?"#catSpace":"#categorySelects";var r=n.split(":");this.currentSelection[r[1]]&&this.currentSelection.splice(r[1]),this.currentSelection[r[1]]=n,0===this.currentSelection.length&&(this.currentSelection[0]="0:0"),$.ajax({type:"POST",url:"lib/categories",data:{action:"grabcats",pastSelections:JSON.stringify(this.currentSelection)},async:!1}).done(function(e){if("undefined"!=typeof $("#categorySelects")[0]){$("#categorySelects").html(""),$(t).html(e),CategoryManage.currentID=n;for(var r=1;r<CategoryManage.currentSelection.length;r++)$("#level"+r).val(CategoryManage.currentSelection[r])}})},createNew:function(){var e=this.getCatString(),t="Add new category\n\n";for(1==this.currentSelection.length&&(t="Create new root category:",e="");;){var n=window.prompt(t+e);if(""!==n){if(null===n)return!1;this.addNew(encodeURIComponent(n));break}alert("Please enter a category description")}},addNew:function(e){var t=e,n=this.currentSelection[this.currentSelection.length-1].split(":");n=n[0],$.post("api/i/categories/add",{parentID:n,catDesc:t},null,"json").done(function(e){alert(e.data),CategoryManage.grabNextLevel(CategoryManage.currentSelection[CategoryManage.currentSelection.length-2])})},editCat:function(){var e=this.currentSelection[this.currentSelection.length-1].split(":"),t=$("#level"+e[1]+" option:selected");if("undefined"!=typeof t.val()){var n=t.text(),r=window.prompt("Edit Category Description:",n);null!==r&&""!==r&&$.post("api/i/categories/edit",{cid:e[0],catDesc:encodeURIComponent(r)},null,"json").done(function(e){alert(e.data),CategoryManage.grabNextLevel(CategoryManage.currentSelection[CategoryManage.currentSelection.length-2])})}},deleteCat:function(){var e=this.getCatString(),t=this.currentSelection[this.currentSelection.length-1].split(":");return t=t[0],window.confirm("Delete "+e+"?\n\nWarning: All child categories will be moved up one level!")?void $.post("api/i/categories/delete",{cid:t},null,"json").done(function(e){alert(e.data),CategoryManage.grabNextLevel(CategoryManage.currentSelection[CategoryManage.currentSelection.length-2])}):!1},getCatString:function(){for(var e="",t=0;t<this.currentSelection.length;t++)if($("#level"+(t+1))){var n=$("#level"+(t+1)+" option:selected");"Select:"!=n.text()&&(e+=n.text()+":")}return e.length>0?e.substring(0,e.length-1):!1}};
//# sourceMappingURL=maps/catManage.min.js.map