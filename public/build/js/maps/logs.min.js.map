{"version":3,"sources":["logs.js"],"names":["showDialog","html","$","dialog","modal","width","show","effect","duration","hide","buttons","Ok","this","filt","refreshc","document","ready","datepicker","change","css","on","e","target","closest","length","stopImmediatePropagation","tinymce","init","browser_spellcheck","refreshFun","runFirst","refreshLog","CategoryManage","grabNextLevel","startrefresh","setInterval","stoprefresh","clearInterval","clearfilter","val","ajax","type","url","async","dataType","done","window","location","reload","view","makeLogView","data","fail","jqXHR","readyState","status","empty","append","showFilterMessage","pageControls","metadata","displayLogs","clearForm","div","attr","offset","prevPage","limit","logSize","nextPage","key","hasOwnProperty","log","creator","realname","title","entry","datec","timec","edited","cat","canEdit","logid","pagentation","pageOffset","post","scrollTo","addFun","showaddinputs","reset","height","Add Log","addlog","Cancel","addLog","forced_root_block","resize","menubar","toolbar","plugins","encodeURIComponent","getCatString","fadeOut","body","decodeURIComponent","fadeIn","setTimeout","editFun","showeditinputs","log_info","linfo","text","Save Edit","editlogs","grabedit","id","editedtitle","editedlog","searchFun","check","keyCode","searchlog","keyword","dateSearch","kw","date","filter","alert"],"mappings":"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","file":"logs.min.js","sourcesContent":["/* global CategoryManage, $, document, window, setInterval, setTimeout, clearInterval, alert, tinymce */\n\n\"use strict\"; // jshint ignore:line\n\nvar filt = false,\n    refreshc;\n\n$(document).ready(function() {\n    $( \"#datesearch\" ).datepicker();\n    $( \"#datesearch\" ).change(function() {\n        $( \"#datesearch\" ).datepicker( \"option\", \"dateFormat\", \"yy-mm-dd\" );\n        });\n\n    $(\"#add_edit\").css(\"display\", \"none\");\n});\n\n$(document).on(\"focusin\", function(e) {\n\tif ($(e.target).closest(\".mce-window\").length) {\n\t\te.stopImmediatePropagation();\n\t}\n});\n\ntinymce.init({\n    browser_spellcheck: true\n});\n\nvar refreshFun =\n{\n    runFirst: function() {\n        refreshFun.refreshLog();\n        CategoryManage.grabNextLevel('0:0');\n        this.startrefresh();\n    },\n\n    startrefresh: function() {\n        refreshc = setInterval(function(){ refreshFun.refreshLog(); }, 60000);\n    },\n\n    stoprefresh: function() {\n        clearInterval(refreshc);\n    },\n\n    refreshLog: function(clearfilter) {\n        if (clearfilter) {\n            filt=false;\n            $(\"#searchterm\").val(\"Keyword\");\n            $(\"#datesearch\").val(\"Date\");\n            refreshFun.startrefresh();\n        }\n\n        if (!filt) {\n            $.ajax({\n                type: \"POST\",\n                url: \"api/i/logs/read\",\n                async: false,\n                dataType: \"json\"\n            })\n                .done(function( html ) {\n                    if (html === \"\") {\n                        window.location.reload(true);\n                    }\n                    view.makeLogView(html.data);\n                })\n\n                .fail(function( jqXHR ) {\n                    if ( typeof jqXHR !== 'undefined' && jqXHR.readyState===4 && jqXHR.status===404)\n                    {\n                        $(\"#refreshed\").html(\"An error has occured. Please try logging out and back in.\");\n                    }\n                });\n        }\n    }\n}; // refreshFun\n\nvar view = {\n    makeLogView:function(data) {\n        $('#refreshed').empty();\n        if (filt) { $('#refreshed').append(view.showFilterMessage()); }\n        $('#refreshed').append(view.pageControls(data.metadata));\n        $('#refreshed').append(view.displayLogs(data));\n        $('#refreshed').append(view.pageControls(data.metadata));\n    },\n\n    showFilterMessage: function() {\n        var clearForm = $('<form/>');\n        // jshint multistr:true\n        var html = '<h3>You are viewing filtered results\\\n                    <button type=\"button\" onClick=\"refreshFun.refreshLog(true)\">Clear Results</button></h3>';\n       clearForm.append(html);\n       return clearForm;\n    },\n\n    pageControls: function(data) {\n        if (filt) {\n            return false;\n        }\n\n        var div = $('<div/>').attr('class', 'pagination');\n\n        var html = '<form method=\"post\">';\n        if (data.offset > 0) {\n            var prevPage = data.offset-data.limit;\n            html += '<input type=\"button\" value=\"Previous '+data.limit+'\" onClick=\"view.pagentation('+prevPage+');\" class=\"flle\">';\n        }\n        if (data.offset+data.limit < data.logSize) {\n            var nextPage = data.offset+data.limit;\n            html += '<input type=\"button\" value=\"Next '+data.limit+'\" onClick=\"view.pagentation('+ nextPage +');\" class=\"flri\">';\n        }\n        html += '</form></div>';\n        div.append(html);\n        return div;\n    },\n\n    displayLogs: function(data) {\n        var div = $('<div/>').attr('id', 'refreshed_core');\n\n        for (var key in data) {\n            if (!data.hasOwnProperty(key) || key == 'metadata')\n                continue;\n\n            var log = data[key];\n\n            var creator = log.realname;\n            if (creator === '') {\n                creator = 'Unknown User';\n            }\n\n            // Display each log entry\n            // jshint multistr:true\n            var html = '<form method=\"post\">\\\n                        <div class=\"logentry\">\\\n                        <h2>' + log.title + '</h2>\\\n                        <p class=\"entry\">' + log.entry + '</p>\\\n                        <p class=\"entrymeta\">Created by ' + creator + ' on ' + log.datec + ' @ ' + log.timec + ' ';\n\n            if (log.edited == \"1\") { html += '(Edited)'; }\n\n            html += '<br>Categorized as ' + log.cat + '\\\n                     <br><a href=\"#\" onClick=\"searchFun.filter(\\'' + log.cat + '\\');\">Learn more about this system...</a>';\n\n            if (log.canEdit) { html += '<input type=\"button\" value=\"Edit\" onClick=\"editFun.grabedit(' + log.logid + ');\" class=\"flri\">'; }\n\n            html += '</p></div></form>';\n\n            div.append(html);\n        }\n        return div;\n    },\n\n    pagentation: function(pageOffset) {\n        $.post(\"api/i/logs/read\", { offset: pageOffset }, null, \"json\")\n            .done(function( html ) {\n                view.makeLogView(html.data);\n\n                if (pageOffset <= 0) {\n                    refreshFun.refreshLog();\n                    refreshFun.startrefresh();\n                } else {\n                    refreshFun.stoprefresh();\n                }\n\n                window.scrollTo(0,0);\n            })\n\n            .fail(function( jqXHR ) {\n                if ( typeof jqXHR !== 'undefined' && jqXHR.readyState===4 && jqXHR.status===404) {\n                    $(\"#refreshed\").html(\"An error has occured. Please try logging out and back in.\");\n                }\n            });\n    }\n}; // View\n\nvar addFun =\n{\n    showaddinputs: function() {\n        $(\"#add_edit_form\")[0].reset();\n        $(\"textarea#logEntry\").html(\"\");\n\n        $( \"#add_edit\" ).dialog({\n\t\t\theight: 575,\n\t\t\twidth: 800,\n\t\t\tmodal: true,\n\t\t\tshow: {\n\t\t\t\teffect: \"fade\",\n\t\t\t\tduration: 500\n\t\t\t},\n\t\t\thide: {\n\t\t\t\teffect: \"fade\",\n\t\t\t\tduration: 500\n\t\t\t},\n\t\t\tbuttons: {\n\t\t\t\t\"Add Log\": function() {\n\t\t\t\t\taddFun.addlog();\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$( this ).dialog( \"close\" );\n\t\t\t\t\tCategoryManage.addLog = false;\n\t\t\t\t\tCategoryManage.grabNextLevel('0:0');\n\t\t\t\t}\n\t\t\t}\n        });\n\n        $(\"textarea#logEntry\").tinymce({\n            browser_spellcheck: true,\n\t\t\tforced_root_block: false,\n\t\t\tresize: false,\n\t\t\tmenubar: \"edit format view insert tools\",\n\t\t\ttoolbar: \"undo redo | styleselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | link | forecolor\",\n\t\t\tplugins: [\n\t\t\t\t\"autolink link lists hr anchor pagebreak\",\n\t\t\t\t\"searchreplace wordcount code insertdatetime\",\n\t\t\t\t\"template paste textcolor\"\n\t\t\t\t]\n        });\n\n        CategoryManage.addLog = true;\n        CategoryManage.grabNextLevel('0:0');\n    },\n\n    addlog: function() {\n        var title = $(\"input#logTitle\").val();\n        title = encodeURIComponent(title);\n        var entry = $(\"textarea#logEntry\").val();\n        entry = encodeURIComponent(entry);\n        var cat = CategoryManage.getCatString();\n\n\t\tif (title !== \"\" && entry !== \"\" && cat !== \"\") {\n\t\t\t$( \"#add_edit\" ).dialog( \"close\" );\n\t\t\t$(\"#messages\").fadeOut();\n\n\t\t\t$.post(\"api/i/logs/create\", { title: title, body: entry, cat: cat }, null, 'json')\n\t\t\t\t.done(function( html ) {\n\t\t\t\t\trefreshFun.refreshLog();\n\t\t\t\t\tCategoryManage.addLog = false;\n\t\t\t\t\tCategoryManage.grabNextLevel('0:0');\n\t\t\t\t\tshowDialog(html.data);\n\t\t\t\t});\n        }\n        else {\n\t\t\t$(\"input#logTitle\").val( decodeURIComponent(title) );\n\t\t\t$(\"textarea#logEntry\").html( decodeURIComponent(entry) );\n\t\t\t$(\"#messages\").html('<span class=\"bad\">Log entries must have a title, category, and entry text.</span>').fadeIn();\n\t\t\tCategoryManage.addLog = true;\n\t\t\tCategoryManage.grabNextLevel('0:0');\n\t\t\tsetTimeout(function() { $(\"#messages\").fadeOut(); }, 10000);\n        }\n    },\n}; //addFun\n\nvar editFun =\n{\n    showeditinputs: function(log_info) {\n        var linfo = log_info.data;\n\n        $(\"input#logTitle\").val( linfo.title );\n        $(\"textarea#logEntry\").val( linfo.entry );\n        $(\"#catSpace\").text( linfo.cat );\n\n        $( \"#add_edit\" ).dialog({\n\t\t\theight: 575,\n\t\t\twidth: 800,\n\t\t\tmodal: true,\n\t\t\tshow: {\n\t\t\t\teffect: \"fade\",\n\t\t\t\tduration: 500\n\t\t\t},\n\t\t\thide: {\n\t\t\t\teffect: \"fade\",\n\t\t\t\tduration: 500\n\t\t\t},\n\t\t\tbuttons: {\n\t\t\t\t\"Save Edit\": function() {\n\t\t\t\t\teditFun.editlogs(linfo.logid);\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$( this ).dialog( \"close\" );\n\t\t\t\t}\n\t\t\t}\n        });\n\n        $(\"textarea#logEntry\").tinymce({\n            browser_spellcheck: true,\n\t\t\tforced_root_block: false,\n\t\t\tresize: false,\n\t\t\tmenubar: \"edit format view insert tools\",\n\t\t\ttoolbar: \"undo redo | styleselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | link | forecolor\",\n\t\t\tplugins: [\n\t\t\t\t\"autolink link lists hr anchor pagebreak\",\n\t\t\t\t\"searchreplace wordcount code insertdatetime\",\n\t\t\t\t\"template paste textcolor\"\n\t\t\t\t]\n        });\n    },\n\n    /* This function is called when a user clicks edit\n     * It grabs the information about the log entry they\n     * want to edit then calls showeditinputs(); to display\n     * the fields.\n     */\n    grabedit: function(logid) {\n        $.post(\"api/i/logs/readone\", { logid: logid }, null, 'json')\n            .done( editFun.showeditinputs );\n    },\n\n    //Sends the finished edited log to a PHP file for processing\n    editlogs: function(id) {\n        var editedtitle = $(\"input#logTitle\").val();\n        editedtitle = encodeURIComponent(editedtitle);\n        var editedlog = $(\"textarea#logEntry\").val();\n        editedlog = encodeURIComponent(editedlog);\n\n        if (editedtitle !== \"\" && editedlog !== \"\") {\n\t\t\t$( \"#add_edit\" ).dialog( \"close\" );\n\t\t\t$(\"#messages\").fadeOut();\n\n\t\t\t$.post(\"api/i/logs/edit\", { logid: id, title: editedtitle, body: editedlog }, null, 'json')\n\t\t\t\t.done(function( html ) {\n\t\t\t\trefreshFun.refreshLog();\n\t\t\t\tshowDialog(html.data);\n\t\t\t});\n\t\t}\n\n        else {\n\t\t\t$(\"#messages\").html('<span class=\"bad\">Log entries must have a title, category, and entry text.</span>').fadeIn();\n\t\t\tsetTimeout(function() { $(\"#messages\").fadeOut(); }, 10000);\n        }\n    },\n}; //editFun\n\nfunction showDialog( html ) {\n\t$( \"#dialog\" ).html( \"<p>\"+html+\"</p>\" );\n\t$( \"#dialog\" ).dialog({\n\t\tmodal: true,\n\t\twidth: 400,\n\t\tshow: {\n\t\t\teffect: \"fade\",\n\t\t\tduration: 500\n\t\t},\n\t\thide: {\n\t\t\teffect: \"fade\",\n\t\t\tduration: 500\n\t\t},\n\t\tbuttons: {\n\t\t\tOk: function() {\n\t\t\t\t$( this ).dialog( \"close\" );\n\t\t\t}\n\t\t}\n\t});\n}\n\nvar searchFun =\n{\n    // Checks if enter key was pressed, if so search\n    check: function(e) {\n        if (e.keyCode == 13) {\n            searchFun.searchlog();\n        }\n    },\n\n    // Search for keyword or datestamp\n    searchlog :function() {\n        var keyword = $(\"input#searchterm\").val();\n        var dateSearch   = $(\"input#datesearch\").val();\n        if (keyword === 'Keyword') { keyword = ''; }\n        if (dateSearch === 'Date') { dateSearch = ''; }\n\n        keyword = encodeURIComponent(keyword);\n\n        $.post(\"api/i/logs/search\", { kw: keyword, date: dateSearch })\n            .done(function( html ) {\n                filt=true;\n                refreshFun.stoprefresh();\n                view.makeLogView(html.data);\n            });\n    },\n\n    // Search for a category of logs\n    filter: function(cat) {\n        if (cat === '') { cat = CategoryManage.getCatString(); }\n\n        if (cat)\n        {\n            $.post(\"api/i/logs/filter\", { filter: cat }, null, 'json')\n                .done(function( html ) {\n                    filt=true;\n                    refreshFun.stoprefresh();\n                    view.makeLogView(html.data);\n                })\n\n                .fail(function( jqXHR ) {\n                    if ( typeof jqXHR !== 'undefined' && jqXHR.readyState===4 && jqXHR.status===404)\n                    {\n                        $(\"#refreshed\").html(\"An error has occured. Please try logging out and back in.\");\n                    }\n                });\n        }\n        else {\n            alert(\"Please select a valid filter.\");\n        }\n    },\n};\n"],"sourceRoot":"/source/"}