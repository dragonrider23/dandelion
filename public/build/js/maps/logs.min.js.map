{"version":3,"sources":["logs.js"],"names":["showDialog","html","dialog","$","modal","width","show","effect","duration","hide","buttons","Ok","this","filt","refreshc","document","ready","dateSearch","datepicker","change","css","on","e","target","closest","length","stopImmediatePropagation","tinymce","init","browser_spellcheck","refreshFun","runFirst","refreshLog","CategoryManage","grabNextLevel","startrefresh","setInterval","stoprefresh","clearInterval","clearfilter","val","ajax","type","url","async","dataType","done","window","location","reload","view","makeLogView","data","fail","jqXHR","readyState","status","logView","empty","append","showFilterMessage","pageControls","metadata","displayLogs","clearForm","div","attr","offset","prevPage","limit","logSize","nextPage","key","hasOwnProperty","log","creator","realname","title","entry","datec","timec","edited","cat","canEdit","logid","pagentation","pageOffset","post","scrollTo","addFun","showaddinputs","entryBox","reset","height","Add Log","sendLog","Cancel","addLog","forced_root_block","resize","menubar","toolbar","plugins","addEditLog","isnew","id","urlvars","encodeURIComponent","getCatString","body","fadeOut","fadeIn","setTimeout","editFun","showeditinputs","log_info","linfo","text","renderCategoriesFromString","Save Edit","grabedit","searchFun","check","keyCode","searchlog","keyword","kw","date","filter","alert"],"mappings":"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","file":"logs.min.js","sourcesContent":["/* global CategoryManage, $, document, window, setInterval, setTimeout, clearInterval, alert, tinymce */\n\n\"use strict\"; // jshint ignore:line\n\nvar filt = false,\n    refreshc;\n\n$(document).ready(function() {\n    var dateSearch = $( \"#datesearch\" );\n    dateSearch.datepicker();\n    dateSearch.change(function() {\n        $( \"#datesearch\" ).datepicker( \"option\", \"dateFormat\", \"yy-mm-dd\" );\n        });\n\n    $(\"#add_edit\").css(\"display\", \"none\");\n});\n\n$(document).on(\"focusin\", function(e) {\n\tif ($(e.target).closest(\".mce-window\").length) {\n\t\te.stopImmediatePropagation();\n\t}\n});\n\ntinymce.init({\n    browser_spellcheck: true\n});\n\nvar refreshFun =\n{\n    runFirst: function() {\n        refreshFun.refreshLog();\n        CategoryManage.grabNextLevel('0:0');\n        this.startrefresh();\n    },\n\n    startrefresh: function() {\n        refreshc = setInterval(function(){ refreshFun.refreshLog(); }, 60000);\n    },\n\n    stoprefresh: function() {\n        clearInterval(refreshc);\n    },\n\n    refreshLog: function(clearfilter) {\n        if (clearfilter) {\n            filt=false;\n            $(\"#searchterm\").val(\"Keyword\");\n            $(\"#datesearch\").val(\"Date\");\n            refreshFun.startrefresh();\n        }\n\n        if (!filt) {\n            $.ajax({\n                type: \"POST\",\n                url: \"api/i/logs/read\",\n                async: false,\n                dataType: \"json\"\n            })\n                .done(function( html ) {\n                    if (html === \"\") {\n                        window.location.reload(true);\n                    }\n                    view.makeLogView(html.data);\n                })\n\n                .fail(function( jqXHR ) {\n                    if ( typeof jqXHR !== 'undefined' && jqXHR.readyState===4 && jqXHR.status===404)\n                    {\n                        $(\"#refreshed\").html(\"An error has occured. Please try logging out and back in.\");\n                    }\n                });\n        }\n    }\n}; // refreshFun\n\nvar view = {\n    makeLogView:function(data) {\n        var logView = $('#refreshed');\n        logView.empty();\n        if (filt) { logView.append(view.showFilterMessage()); }\n        logView.append(view.pageControls(data.metadata));\n        logView.append(view.displayLogs(data));\n        logView.append(view.pageControls(data.metadata));\n    },\n\n    showFilterMessage: function() {\n        var clearForm = $('<form/>');\n        // jshint multistr:true\n        var html = '<h3>You are viewing filtered results\\\n                    <button type=\"button\" onClick=\"refreshFun.refreshLog(true)\">Clear Results</button></h3>';\n       clearForm.append(html);\n       return clearForm;\n    },\n\n    pageControls: function(data) {\n        if (filt) {\n            return false;\n        }\n\n        var div = $('<div/>').attr('class', 'pagination');\n\n        var html = '<form method=\"post\">';\n        if (data.offset > 0) {\n            var prevPage = data.offset-data.limit;\n            html += '<input type=\"button\" value=\"Previous '+data.limit+'\" onClick=\"view.pagentation('+prevPage+');\" class=\"flle\">';\n        }\n        if (data.offset+data.limit < data.logSize) {\n            var nextPage = data.offset+data.limit;\n            html += '<input type=\"button\" value=\"Next '+data.limit+'\" onClick=\"view.pagentation('+ nextPage +');\" class=\"flri\">';\n        }\n        html += '</form></div>';\n        div.append(html);\n        return div;\n    },\n\n    displayLogs: function(data) {\n        var div = $('<div/>').attr('id', 'refreshed_core');\n\n        for (var key in data) {\n            if (!data.hasOwnProperty(key) || key == 'metadata')\n                continue;\n\n            var log = data[key];\n\n            var creator = log.realname;\n            if (creator === '') {\n                creator = 'Unknown User';\n            }\n\n            // Display each log entry\n            // jshint multistr:true\n            var html = '<form method=\"post\">\\\n                        <div class=\"logentry\">\\\n                        <h2>' + log.title + '</h2>\\\n                        <p class=\"entry\">' + log.entry + '</p>\\\n                        <p class=\"entrymeta\">Created by ' + creator + ' on ' + log.datec + ' @ ' + log.timec + ' ';\n\n            if (log.edited == \"1\") { html += '(Edited)'; }\n\n            html += '<br>Categorized as ' + log.cat + '<br><a href=\"#\" onClick=\"searchFun.filter(\\'' + log.cat + '\\');\">Learn more about this system...</a>';\n\n            if (log.canEdit) { html += '<input type=\"button\" value=\"Edit\" onClick=\"editFun.grabedit(' + log.logid + ');\" class=\"flri\">'; }\n\n            html += '</p></div></form>';\n\n            div.append(html);\n        }\n        return div;\n    },\n\n    pagentation: function(pageOffset) {\n        $.post(\"api/i/logs/read\", { offset: pageOffset }, null, \"json\")\n            .done(function( html ) {\n                view.makeLogView(html.data);\n\n                if (pageOffset <= 0) {\n                    refreshFun.refreshLog();\n                    refreshFun.startrefresh();\n                } else {\n                    refreshFun.stoprefresh();\n                }\n\n                window.scrollTo(0,0);\n            })\n\n            .fail(function( jqXHR ) {\n                if ( typeof jqXHR !== 'undefined' && jqXHR.readyState===4 && jqXHR.status===404) {\n                    $(\"#refreshed\").html(\"An error has occured. Please try logging out and back in.\");\n                }\n            });\n    }\n}; // View\n\nvar addFun =\n{\n    showaddinputs: function() {\n        var entryBox = $(\"textarea#logEntry\");\n        $(\"#add_edit_form\")[0].reset();\n        entryBox.html(\"\");\n\n        $( \"#add_edit\" ).dialog({\n\t\t\theight: 575,\n\t\t\twidth: 800,\n\t\t\tmodal: true,\n\t\t\tshow: {\n\t\t\t\teffect: \"fade\",\n\t\t\t\tduration: 500\n\t\t\t},\n\t\t\thide: {\n\t\t\t\teffect: \"fade\",\n\t\t\t\tduration: 500\n\t\t\t},\n\t\t\tbuttons: {\n\t\t\t\t\"Add Log\": function() {\n\t\t\t\t\taddFun.sendLog(true);\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$( this ).dialog( \"close\" );\n\t\t\t\t\tCategoryManage.addLog = false;\n\t\t\t\t\tCategoryManage.grabNextLevel('0:0');\n\t\t\t\t}\n\t\t\t}\n        });\n\n        entryBox.tinymce({\n            browser_spellcheck: true,\n\t\t\tforced_root_block: false,\n\t\t\tresize: false,\n\t\t\tmenubar: \"edit format view insert tools\",\n\t\t\ttoolbar: \"undo redo | styleselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | link | forecolor\",\n\t\t\tplugins: [\n\t\t\t\t\"autolink link lists hr anchor pagebreak\",\n\t\t\t\t\"searchreplace wordcount code insertdatetime\",\n\t\t\t\t\"template paste textcolor\"\n\t\t\t\t]\n        });\n\n        CategoryManage.addEditLog = true;\n        CategoryManage.grabNextLevel('0:0');\n    },\n\n    sendLog: function(isnew, id) {\n        var urlvars = {};\n        var url = '';\n        var title = $(\"input#logTitle\").val();\n        title = encodeURIComponent(title);\n        var entry = $(\"textarea#logEntry\").val();\n        entry = encodeURIComponent(entry);\n        var cat = CategoryManage.getCatString();\n\n        if (isnew) {\n            urlvars = { title: title, body: entry, cat: cat };\n            url = 'api/i/logs/create';\n        } else {\n            urlvars = { logid: id, title: title, body: entry, cat: cat };\n            url = 'api/i/logs/edit';\n        }\n\n\t\tif (title !== \"\" && entry !== \"\" && cat !== \"\") {\n\t\t\t$( \"#add_edit\" ).dialog( \"close\" );\n\t\t\t$(\"#messages\").fadeOut();\n\n\t\t\t$.post(url, urlvars, null, 'json')\n\t\t\t\t.done(function( html ) {\n\t\t\t\t\trefreshFun.refreshLog();\n\t\t\t\t\tCategoryManage.addEditLog = false;\n\t\t\t\t\tCategoryManage.grabNextLevel('0:0');\n\t\t\t\t\tshowDialog(html.data);\n\t\t\t\t});\n        } else {\n\t\t\t$(\"#messages\").html('<span class=\"bad\">Log entries must have a title, category, and entry text.</span>').fadeIn();\n\t\t\tCategoryManage.addEditLog = true;\n\t\t\tCategoryManage.grabNextLevel('0:0');\n\t\t\tsetTimeout(function() { $(\"#messages\").fadeOut(); }, 10000);\n        }\n    }\n}; //addFun\n\nvar editFun =\n{\n    showeditinputs: function(log_info) {\n        var linfo = log_info.data;\n        var entryBox = $(\"textarea#logEntry\");\n\n        $(\"input#logTitle\").val( linfo.title );\n        entryBox.val( linfo.entry );\n        $(\"#catSpace\").text('Loading categories...');\n\n        CategoryManage.renderCategoriesFromString(linfo.cat, function(html) {\n            $(\"#catSpace\").html(html);\n            CategoryManage.addEditLog = true;\n        });\n\n        $( \"#add_edit\" ).dialog({\n\t\t\theight: 575,\n\t\t\twidth: 800,\n\t\t\tmodal: true,\n\t\t\tshow: {\n\t\t\t\teffect: \"fade\",\n\t\t\t\tduration: 500\n\t\t\t},\n\t\t\thide: {\n\t\t\t\teffect: \"fade\",\n\t\t\t\tduration: 500\n\t\t\t},\n\t\t\tbuttons: {\n\t\t\t\t\"Save Edit\": function() {\n                    addFun.sendLog(false, linfo.logid);\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$( this ).dialog( \"close\" );\n\t\t\t\t}\n\t\t\t}\n        });\n\n        entryBox.tinymce({\n            browser_spellcheck: true,\n\t\t\tforced_root_block: false,\n\t\t\tresize: false,\n\t\t\tmenubar: \"edit format view insert tools\",\n\t\t\ttoolbar: \"undo redo | styleselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | link | forecolor\",\n\t\t\tplugins: [\n\t\t\t\t\"autolink link lists hr anchor pagebreak\",\n\t\t\t\t\"searchreplace wordcount code insertdatetime\",\n\t\t\t\t\"template paste textcolor\"\n\t\t\t\t]\n        });\n    },\n\n    /* This function is called when a user clicks edit\n     * It grabs the information about the log entry they\n     * want to edit then calls showeditinputs(); to display\n     * the fields.\n     */\n    grabedit: function(logid) {\n        $.post(\"api/i/logs/readone\", { logid: logid }, null, 'json')\n            .done( editFun.showeditinputs );\n    }\n}; //editFun\n\nfunction showDialog( html ) {\n    var dialog = $( \"#dialog\" );\n\tdialog.html( \"<p>\"+html+\"</p>\" );\n\tdialog.dialog({\n\t\tmodal: true,\n\t\twidth: 400,\n\t\tshow: {\n\t\t\teffect: \"fade\",\n\t\t\tduration: 500\n\t\t},\n\t\thide: {\n\t\t\teffect: \"fade\",\n\t\t\tduration: 500\n\t\t},\n\t\tbuttons: {\n\t\t\tOk: function() {\n\t\t\t\t$( this ).dialog( \"close\" );\n\t\t\t}\n\t\t}\n\t});\n}\n\nvar searchFun =\n{\n    // Checks if enter key was pressed, if so search\n    check: function(e) {\n        if (e.keyCode == 13) {\n            searchFun.searchlog();\n        }\n    },\n\n    // Search for keyword or datestamp\n    searchlog :function() {\n        var keyword = $(\"input#searchterm\").val();\n        var dateSearch   = $(\"input#datesearch\").val();\n        if (keyword === 'Keyword') { keyword = ''; }\n        if (dateSearch === 'Date') { dateSearch = ''; }\n\n        keyword = encodeURIComponent(keyword);\n\n        $.post(\"api/i/logs/search\", { kw: keyword, date: dateSearch })\n            .done(function( html ) {\n                filt=true;\n                refreshFun.stoprefresh();\n                view.makeLogView(html.data);\n            });\n    },\n\n    // Search for a category of logs\n    filter: function(cat) {\n        if (cat === '') { cat = CategoryManage.getCatString(); }\n\n        if (cat)\n        {\n            $.post(\"api/i/logs/filter\", { filter: cat }, null, 'json')\n                .done(function( html ) {\n                    filt=true;\n                    refreshFun.stoprefresh();\n                    view.makeLogView(html.data);\n                })\n\n                .fail(function( jqXHR ) {\n                    if ( typeof jqXHR !== 'undefined' && jqXHR.readyState===4 && jqXHR.status===404)\n                    {\n                        $(\"#refreshed\").html(\"An error has occured. Please try logging out and back in.\");\n                    }\n                });\n        }\n        else {\n            alert(\"Please select a valid filter.\");\n        }\n    }\n};\n"],"sourceRoot":"/source/"}